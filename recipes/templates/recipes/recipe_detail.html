<!-- recipes/templates/recipes/recipe_detail.html -->
{% extends "recipes/base.html" %}
{% load static %}

{% block title %}{{ recipe.title }} - Recipe Sharing{% endblock %}

{% block content %}
<div class="card">
    {% if recipe.image_url %}
    <img src="{{ recipe.image_url }}" class="card-img-top" alt="{{ recipe.title }}">
    {% endif %}
    <div class="card-body">
        <h2 class="card-title">{{ recipe.title }}</h2>
        <p class="text-muted">Published on: {{ recipe.created_at|date:"F d, Y" }}</p>
        <p class="card-text"><strong>Description:</strong> {{ recipe.description }}</p>
        <hr>
        <h4>Ingredients</h4>
        <p>{{ recipe.ingredients|linebreaks }}</p>
        <hr>
        <h4>Instructions</h4>
        <p>{{ recipe.instructions|linebreaks }}</p>
        <a href="{% url 'recipe_list' %}" class="btn btn-secondary mt-3">Back to Recipes</a>
    </div>
</div>
<!-- Container for the React "Like" Button -->
<div id="likeButton" class="mt-3"></div>

<!-- Include React and ReactDOM via CDN -->
<script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
<!-- Include Babel for JSX support in the browser -->
<script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

<!-- React Component Code -->
<script type="text/babel">
  function LikeButton() {
    const [count, setCount] = React.useState(0);
    return (
      <button className="btn btn-success" onClick={() => setCount(count + 1)}>
        Like ({count})
      </button>
    );
  }
  
  // Render the LikeButton component into the container
  ReactDOM.createRoot(document.getElementById('likeButton')).render(<LikeButton />);
</script>

{% endblock %}
